(function(e){function t(t){for(var r,a,i=t[0],c=t[1],u=t[2],l=0,f=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/libp2p-pubsub-vue/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var p=c;o.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"034f":function(e,t,n){"use strict";var r=n("85ec"),s=n.n(r);s.a},1:function(e,t,n){e.exports=n("56d7")},2:function(e,t){},3:function(e,t){},4:function(e,t){},"4fb0":function(e,t,n){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("ipfs-info")],1)},o=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ipfs-info"},[r("img",{staticClass:"ipfs-logo",attrs:{alt:"IPFS logo",src:n("9b19")}}),r("form",{on:{submit:function(t){return t.preventDefault(),e.sendMessage(t)}}},[r("div",{staticClass:"messages",attrs:{id:"messages"}},e._l(e.messages,(function(t,n){return r("p",{key:n},[e._v(e._s(t))])})),0),r("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{size:"50",placeholder:"Write something and press enter."},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),r("br"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.peer,expression:"peer"}],attrs:{size:"50",placeholder:"Fill target Peer for direct message."},domProps:{value:e.peer},on:{input:function(t){t.target.composing||(e.peer=t.target.value)}}}),r("input",{attrs:{type:"submit"}})]),r("h4",[e._v(e._s(e.status))]),r("h5",[e._v("ID: "+e._s(e.id))])])},i=[],c=(n("d3b7"),n("25f0"),n("96cf"),n("1da1")),u=n("668b"),p=n("66f2"),l=(n("eddf"),{name:"IpfsInfo",data:function(){return{status:"Connecting to IPFS...",id:"",message:"",peer:"",messages:[],libp2p:{}}},mounted:function(){this.startPubsub()},methods:{startPubsub:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$startLibp2p();case 2:e.libp2p=t.sent,window.libp2p=e.libp2p,e.id=e.libp2p.peerId.toB58String(),e.libp2p.pubsub.subscribe("news",(function(t){e.messages.push(t.data.toString());var n=document.getElementById("messages");n.scrollTop=n.scrollHeight})),e.libp2p.handle("/protocool",(function(t){var n=t.stream;p(n,function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r,s,o,a,i,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=!0,s=!1,t.prev=2,a=Object(u["a"])(n);case 4:return t.next=6,a.next();case 6:return i=t.sent,r=i.done,t.next=10,i.value;case 10:if(c=t.sent,r){t.next=17;break}p=c,e.messages.push(p.toString());case 14:r=!0,t.next=4;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](2),s=!0,o=t.t0;case 23:if(t.prev=23,t.prev=24,r||null==a.return){t.next=28;break}return t.next=28,a.return();case 28:if(t.prev=28,!s){t.next=31;break}throw o;case 31:return t.finish(28);case 32:return t.finish(23);case 33:case"end":return t.stop()}}),t,null,[[2,19,23,33],[24,,28,32]])})));return function(e){return t.apply(this,arguments)}}())}));case 7:case"end":return t.stop()}}),t)})))()},sendMessage:function(){this.peer?(console.log("enviando... ",this.peer),this.sendDirectMessage(this.peer)):(this.libp2p.pubsub.publish("news",this.message),this.message="")},sendDirectMessage:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t.libp2p.peerStore.peers.get(e)),r=t.libp2p.peerStore.peers.get(e),n.next=4,t.libp2p.dialProtocol(r.id,"/protocool");case 4:return s=n.sent,o=s.stream,n.next=8,p([t.message],o);case 8:case"end":return n.stop()}}),n)})))()}}}),f=l,d=(n("8063"),n("2877")),b=Object(d["a"])(f,a,i,!1,null,"0411d265",null),g=b.exports,m={name:"app",components:{IpfsInfo:g}},v=m,h=(n("034f"),Object(d["a"])(v,s,o,!1,null,null,null)),w=h.exports,x=n("3591"),y=n("6101"),O=n("b04a"),j=n("d6e3"),P=n("2b27"),_=n("2f0b"),S=(n("e06e"),{install:function(e){e.prototype.$startLibp2p=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x.create({addresses:{listen:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star"]},modules:{transport:[y,O],streamMuxer:[j],connEncryption:[P],pubsub:_},config:{pubsub:{enabled:!0,emitSelf:!0}}});case 2:return t=e.sent,t.on("peer:discovery",(function(e){console.log("Found peer ".concat(e.toB58String()))})),t.connectionManager.on("peer:connect",(function(e){console.log("Connected to ".concat(e.remotePeer))})),t.connectionManager.on("peer:disconnect",(function(e){console.log("Disconnected from ".concat(e.remotePeer.toB58String()))})),e.next=8,t.start();case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))}}),k=S;r["a"].use(k),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(w)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},8063:function(e,t,n){"use strict";var r=n("4fb0"),s=n.n(r);s.a},"85ec":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.e7599486.svg"}});
//# sourceMappingURL=app.bb9272aa.js.map